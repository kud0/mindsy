<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API Benchmark Report - GET http://localhost:3000/api/health</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      line-height: 1.6;
      color: #333;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    h1, h2, h3 {
      color: #2c3e50;
    }
    .container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 30px;
    }
    .card {
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      padding: 20px;
      flex: 1;
      min-width: 300px;
    }
    .chart-container {
      height: 300px;
      margin-bottom: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }
    th, td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }
    th {
      background-color: #f8f9fa;
    }
    .metric {
      font-size: 24px;
      font-weight: bold;
      margin: 10px 0;
    }
    .metric-label {
      font-size: 14px;
      color: #666;
    }
    .success {
      color: #28a745;
    }
    .warning {
      color: #ffc107;
    }
    .danger {
      color: #dc3545;
    }
  </style>
</head>
<body>
  <h1>API Benchmark Report</h1>
  <p>Endpoint: <strong>GET http://localhost:3000/api/health</strong> | Generated: 2025-07-17T13:33:42.189Z</p>
  
  <div class="container">
    <div class="card">
      <h2>Summary</h2>
      <div class="metric">102.73 req/sec</div>
      <div class="metric-label">Throughput</div>
      
      <div class="metric danger">
        0.00%
      </div>
      <div class="metric-label">Success Rate</div>
      
      <div class="metric">9.21ms</div>
      <div class="metric-label">Average Response Time</div>
    </div>
    
    <div class="card">
      <h2>Configuration</h2>
      <table>
        <tr><th>Iterations</th><td>1</td></tr>
        <tr><th>Concurrency</th><td>1</td></tr>
        <tr><th>Warmup Requests</th><td>0</td></tr>
        <tr><th>Delay Between Batches</th><td>0ms</td></tr>
        <tr><th>Total Duration</th><td>9.73ms</td></tr>
      </table>
    </div>
  </div>
  
  <div class="container">
    <div class="card">
      <h2>Response Time Distribution</h2>
      <div class="chart-container">
        <canvas id="responseTimeChart"></canvas>
      </div>
    </div>
    
    <div class="card">
      <h2>Status Codes</h2>
      <div class="chart-container">
        <canvas id="statusCodeChart"></canvas>
      </div>
    </div>
  </div>
  
  <div class="container">
    <div class="card">
      <h2>Response Time Percentiles</h2>
      <table>
        <tr><th>Minimum</th><td>9.21ms</td></tr>
        <tr><th>P50 (Median)</th><td>9.21ms</td></tr>
        <tr><th>P75</th><td>9.21ms</td></tr>
        <tr><th>P90</th><td>9.21ms</td></tr>
        <tr><th>P95</th><td>9.21ms</td></tr>
        <tr><th>P99</th><td>9.21ms</td></tr>
        <tr><th>Maximum</th><td>9.21ms</td></tr>
        <tr><th>Standard Deviation</th><td>0.00ms</td></tr>
      </table>
    </div>
    
    <div class="card">
      <h2>System Information</h2>
      <table>
        <tr><th>Platform</th><td>darwin</td></tr>
        <tr><th>Release</th><td>24.5.0</td></tr>
        <tr><th>CPUs</th><td>10</td></tr>
        <tr><th>Total Memory</th><td>32768 MB</td></tr>
        <tr><th>Free Memory</th><td>927 MB</td></tr>
        <tr><th>Node Version</th><td>v20.12.0</td></tr>
      </table>
    </div>
  </div>
  
  <div class="container">
    <div class="card">
      <h2>Response Time Timeline</h2>
      <div class="chart-container">
        <canvas id="timelineChart"></canvas>
      </div>
    </div>
  </div>

  <script>
    // Parse the benchmark data
    const reportData = {"endpoint":"GET http://localhost:3000/api/health","timestamp":"2025-07-17T13:33:42.189Z","systemInfo":{"platform":"darwin","release":"24.5.0","cpus":10,"totalMemory":"32768 MB","freeMemory":"927 MB","nodeVersion":"v20.12.0"},"config":{"iterations":1,"concurrency":1,"warmup":0,"delay":0},"results":{"totalTime":"9.73","requestsPerSecond":"102.73","bytesPerSecond":"0.00","totalBytes":0,"successRate":"0.00","statusCodes":{"0":1},"responseTimes":{"min":"9.21","max":"9.21","avg":"9.21","stdDev":"0.00","p50":"9.21","p75":"9.21","p90":"9.21","p95":"9.21","p99":"9.21"}},"details":[{"index":0,"isWarmup":false,"success":false,"statusCode":0,"responseTime":9.208665999999994,"responseSize":0,"serverTiming":null,"timestamp":"2025-07-17T13:33:42.189Z","error":"request to http://localhost:3000/api/health failed, reason: "}],"warmup":[]};
    
    // Prepare data for charts
    const responseTimeData = reportData.details.map(r => r.responseTime);
    
    // Response time histogram
    const histogramBuckets = 10;
    const minTime = Math.min(...responseTimeData);
    const maxTime = Math.max(...responseTimeData);
    const bucketSize = (maxTime - minTime) / histogramBuckets;
    const histogramLabels = [];
    const histogramData = [];
    
    for (let i = 0; i < histogramBuckets; i++) {
      const bucketStart = minTime + (i * bucketSize);
      const bucketEnd = bucketStart + bucketSize;
      histogramLabels.push(`${bucketStart.toFixed(0)}-${bucketEnd.toFixed(0)}ms`);
      
      const count = responseTimeData.filter(t => t >= bucketStart && t < bucketEnd).length;
      histogramData.push(count);
    }
    
    // Status code chart
    const statusCodes = Object.keys(reportData.results.statusCodes);
    const statusCodeCounts = statusCodes.map(code => reportData.results.statusCodes[code]);
    
    // Timeline chart
    const timelineLabels = reportData.details.map((_, i) => i + 1);
    const timelineData = reportData.details.map(r => r.responseTime);
    
    // Create charts
    window.addEventListener('load', function() {
      // Response time histogram
      new Chart(document.getElementById('responseTimeChart'), {
        type: 'bar',
        data: {
          labels: histogramLabels,
          datasets: [{
            label: 'Number of Requests',
            data: histogramData,
            backgroundColor: 'rgba(54, 162, 235, 0.5)',
            borderColor: 'rgba(54, 162, 235, 1)',
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: 'Number of Requests'
              }
            },
            x: {
              title: {
                display: true,
                text: 'Response Time'
              }
            }
          }
        }
      });
      
      // Status code chart
      new Chart(document.getElementById('statusCodeChart'), {
        type: 'pie',
        data: {
          labels: statusCodes,
          datasets: [{
            data: statusCodeCounts,
            backgroundColor: [
              'rgba(75, 192, 192, 0.5)',
              'rgba(255, 99, 132, 0.5)',
              'rgba(255, 205, 86, 0.5)',
              'rgba(54, 162, 235, 0.5)',
              'rgba(153, 102, 255, 0.5)'
            ],
            borderColor: [
              'rgba(75, 192, 192, 1)',
              'rgba(255, 99, 132, 1)',
              'rgba(255, 205, 86, 1)',
              'rgba(54, 162, 235, 1)',
              'rgba(153, 102, 255, 1)'
            ],
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
        }
      });
      
      // Timeline chart
      new Chart(document.getElementById('timelineChart'), {
        type: 'line',
        data: {
          labels: timelineLabels,
          datasets: [{
            label: 'Response Time (ms)',
            data: timelineData,
            fill: false,
            borderColor: 'rgba(75, 192, 192, 1)',
            tension: 0.1
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: 'Response Time (ms)'
              }
            },
            x: {
              title: {
                display: true,
                text: 'Request Number'
              }
            }
          }
        }
      });
    });
  </script>
</body>
</html>