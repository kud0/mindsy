---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Navbar from '../../components/Navbar.astro';
import Footer from '../../components/Footer.astro';
import { useTranslations } from '../../lib/i18n';

// Get user from locals (set by middleware)
const user = Astro.locals.user;
const isAuthenticated = !!user;
const lang = 'es';
const t = useTranslations(lang);
---

<BaseLayout title="Política de Privacidad">
  <div class="min-h-screen bg-gradient-to-b from-blue-50 to-white">
    <Navbar
      lang={lang}
      currentPage="privacy"
      isAuthenticated={isAuthenticated}
    />
    
    <!-- Header Section -->
    <section class="pt-20 pb-16">
      <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto">
          <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">
              {t('privacy.title')}
            </h1>
            <p class="text-xl text-gray-600">
              {t('privacy.subtitle')}
            </p>
          </div>
          
          <div class="mb-8">
            <a 
              href="/es" 
              class="inline-flex items-center text-blue-600 hover:text-blue-700 transition-colors"
            >
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
              </svg>
              {t('privacy.backHome')}
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Privacy Policy Content Section -->
    <section class="pb-20">
      <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto">
          <div class="bg-white rounded-lg shadow-lg p-8 md:p-12">
            <div class="prose prose-lg max-w-none">
              <!-- Last Updated -->
              <div class="mb-8 p-4 bg-blue-50 rounded-lg border border-blue-200">
                <p class="text-sm text-blue-800 font-medium">
                  <strong>{t('privacy.lastUpdated')}:</strong> Agosto 2025
                </p>
              </div>

              <!-- Privacy Policy Content -->
              <div class="space-y-8">
                <p class="text-lg text-gray-700 leading-relaxed">
                  Tu privacidad es importante para nosotros. Esta Política de Privacidad explica cómo mysummary.app ("nosotros", "nos" o "nuestro") recopila, usa y divulga información sobre ti cuando usas nuestro sitio web, servicios y aplicación (colectivamente, el "Servicio").
                </p>
                
                <p class="text-gray-700">
                  Al usar nuestro Servicio, aceptas la recopilación y uso de información de acuerdo con esta política.
                </p>

                <section>
                  <h2 class="text-2xl font-bold text-gray-900 mb-4">1. Información que Recopilamos</h2>
                  <p class="text-gray-700 mb-4">Recopilamos información de diferentes maneras para proporcionarte y mejorar nuestro Servicio.</p>
                  
                  <h3 class="text-xl font-semibold text-gray-900 mb-3">a) Información que nos Proporcionas:</h3>
                  <ul class="space-y-3 text-gray-700 mb-6">
                    <li>
                      <strong>Información de Cuenta:</strong> Cuando te registras para una cuenta, recopilamos tu dirección de correo electrónico y contraseña. Si te registras usando un servicio de terceros como Google o GitHub, recibiremos información de ese servicio, como tu nombre y dirección de correo electrónico, según autorices.
                    </li>
                    <li>
                      <strong>Información de Suscripción:</strong> Cuando te suscribes a un plan de pago, nuestro procesador de pagos (Stripe) recopilará tu información de pago. No almacenamos los detalles completos de tu tarjeta de crédito en nuestros servidores. Solo almacenamos información necesaria para gestionar tu suscripción, como tu ID de Cliente de Stripe y estado de suscripción.
                    </li>
                    <li>
                      <strong>Comunicaciones:</strong> Si nos contactas directamente a través de nuestro correo de soporte (support@mysummary.app), podemos recibir información adicional que proporciones, como tu nombre y el contenido de tu mensaje.
                    </li>
                  </ul>

                  <h3 class="text-xl font-semibold text-gray-900 mb-3">b) Información que Recopilamos Automáticamente:</h3>
                  <ul class="space-y-3 text-gray-700 mb-6">
                    <li>
                      <strong>Datos de Registro y Uso:</strong> Como la mayoría de sitios web, recopilamos información que tu navegador envía cuando visitas nuestro Servicio. Esto puede incluir tu dirección IP, tipo de navegador, versión del navegador, las páginas que visitas, y la hora y fecha de tu visita. Esto se usa para análisis y para asegurar nuestro Servicio.
                    </li>
                  </ul>

                  <h3 class="text-xl font-semibold text-gray-900 mb-3">c) Contenido que Proporcionas para Procesamiento:</h3>
                  <ul class="space-y-3 text-gray-700">
                    <li>
                      <strong>Archivos de Audio:</strong> Recopilamos los archivos de audio que subes con el único propósito de transcribirlos y generar tus notas.
                    </li>
                    <li>
                      <strong>Contenido Generado:</strong> Procesamos temporalmente el texto transcrito y el Contenido Generado final (Notas Mindsy, resúmenes) para crear tu PDF descargable.
                    </li>
                  </ul>
                </section>

                <section>
                  <h2 class="text-2xl font-bold text-gray-900 mb-4">2. Cómo Usamos tu Información</h2>
                  <p class="text-gray-700 mb-4">Usamos la información que recopilamos para los siguientes propósitos:</p>
                  <ul class="space-y-3 text-gray-700">
                    <li><strong>Para Proporcionar y Mantener nuestro Servicio:</strong> Para crear tu cuenta, procesar tus archivos de audio, generar tus notas y gestionar tu suscripción.</li>
                    <li><strong>Para Comunicarnos Contigo:</strong> Para enviarte correos transaccionales, como verificación de cuenta, restablecimientos de contraseña, confirmaciones de pago y actualizaciones importantes sobre el Servicio.</li>
                    <li><strong>Para Procesar Pagos:</strong> Para gestionar tus suscripciones y facturación a través de nuestro procesador de pagos.</li>
                    <li><strong>Para Seguridad y Prevención de Fraude:</strong> Para monitorear y prevenir actividad fraudulenta o ilegal.</li>
                    <li><strong>Para Mejorar nuestro Servicio:</strong> Para analizar patrones de uso y entender cómo mejorar la experiencia del usuario.</li>
                  </ul>
                </section>

                <section>
                  <h2 class="text-2xl font-bold text-gray-900 mb-4">3. Cómo Manejamos tu Contenido (Audio y Notas)</h2>
                  <p class="text-gray-700 mb-4">Tu contenido es tuyo. Nuestro manejo está diseñado con la privacidad como máxima prioridad.</p>
                  <ul class="space-y-3 text-gray-700">
                    <li><strong>Procesamiento:</strong> Tus archivos de audio subidos se envían a nuestro servicio de transcripción seguro y auto-hospedado (ejecutándose en RunPod) para procesamiento. La transcripción resultante se envía luego a la API de OpenAI para generación de notas. No usamos tu contenido para entrenar nuestros modelos de IA o de terceros.</li>
                    <li><strong>Almacenamiento:</strong> Tus archivos de audio originales y PDFs generados finales se almacenan de forma segura en tu bucket privado de Supabase Storage. El acceso está restringido por políticas de seguridad solo a tu cuenta.</li>
                    <li><strong>Retención de Datos:</strong> Mantenemos tus archivos subidos y notas generadas mientras tu cuenta esté activa, para permitirte acceder a ellos desde tu panel. Puedes eliminar tus archivos y tu cuenta en cualquier momento. Cuando eliminas un archivo o tu cuenta, se remueve permanentemente de nuestro almacenamiento.</li>
                  </ul>
                </section>

                <section>
                  <h2 class="text-2xl font-bold text-gray-900 mb-4">4. Compartir y Divulgación de Información</h2>
                  <p class="text-gray-700 mb-4">No vendemos ni alquilamos tu información personal. Solo compartimos tu información con proveedores de servicios de terceros confiables que nos ayudan a operar nuestro Servicio, bajo estrictos acuerdos de privacidad. Estos incluyen:</p>
                  <ul class="space-y-2 text-gray-700 mb-4">
                    <li><strong>Supabase:</strong> Nuestro proveedor de base de datos, autenticación y almacenamiento de archivos.</li>
                    <li><strong>Vercel:</strong> Nuestro proveedor de hosting web.</li>
                    <li><strong>Stripe:</strong> Nuestro procesador de pagos.</li>
                    <li><strong>Resend:</strong> Nuestro proveedor de correo transaccional.</li>
                    <li><strong>RunPod & Railway:</strong> Nuestros proveedores de infraestructura para nuestros modelos de IA auto-hospedados.</li>
                    <li><strong>OpenAI:</strong> El proveedor del modelo de IA para generar notas.</li>
                  </ul>
                  <p class="text-gray-700">También podemos divulgar tu información si es requerido por ley o para proteger los derechos, propiedad o seguridad de nosotros, nuestros usuarios u otros.</p>
                </section>

                <section>
                  <h2 class="text-2xl font-bold text-gray-900 mb-4">5. Tus Derechos de Datos (GDPR)</h2>
                  <p class="text-gray-700 mb-4">Si eres residente del Área Económica Europea (EEA), tienes ciertos derechos de protección de datos. Apuntamos a tomar pasos razonables para permitirte corregir, enmendar, eliminar o limitar el uso de tus Datos Personales.</p>
                  <ul class="space-y-3 text-gray-700 mb-4">
                    <li>Puedes acceder y actualizar tu información de cuenta en cualquier momento a través de la configuración de tu cuenta.</li>
                    <li>Puedes eliminar tus archivos o tu cuenta completa desde el panel.</li>
                    <li>Tienes el derecho a la portabilidad de datos y el derecho a retirar el consentimiento.</li>
                  </ul>
                  <p class="text-gray-700">Para ejercer cualquiera de estos derechos, por favor contáctanos en <strong>support@mysummary.app</strong>.</p>
                </section>

                <section>
                  <h2 class="text-2xl font-bold text-gray-900 mb-4">6. Seguridad</h2>
                  <p class="text-gray-700">
                    La seguridad de tus datos es una máxima prioridad. Usamos medidas de seguridad administrativas, técnicas y físicas estándar de la industria para proteger tu información. Nuestra plataforma está construida sobre proveedores confiables como Supabase y Vercel, que emplean prácticas de seguridad robustas.
                  </p>
                </section>

                <section>
                  <h2 class="text-2xl font-bold text-gray-900 mb-4">7. Ley Aplicable</h2>
                  <p class="text-gray-700">
                    Esta Política de Privacidad se rige por las leyes de <strong>España</strong>.
                  </p>
                </section>

                <section>
                  <h2 class="text-2xl font-bold text-gray-900 mb-4">8. Cambios a esta Política de Privacidad</h2>
                  <p class="text-gray-700">
                    Podemos actualizar nuestra Política de Privacidad de vez en cuando. Te notificaremos de cualquier cambio publicando la nueva política en esta página y actualizando la fecha de "Última Actualización" en la parte superior.
                  </p>
                </section>

                <section>
                  <h2 class="text-2xl font-bold text-gray-900 mb-4">9. Contáctanos</h2>
                  <p class="text-gray-700">
                    Si tienes alguna pregunta sobre esta Política de Privacidad, por favor contáctanos en <strong>support@mysummary.app</strong>.
                  </p>
                </section>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <Footer lang={lang} isAuthenticated={isAuthenticated} />
  </div>
</BaseLayout>