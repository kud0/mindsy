---
export interface Props {
  src?: string;
  alt: string;
  class?: string;
  loading?: 'eager' | 'lazy';
  showFallback?: boolean;
  fallbackText?: string;
}

const { 
  src, 
  alt, 
  class: className = '', 
  loading = 'lazy',
  showFallback = false,
  fallbackText = 'No image available'
} = Astro.props;

// Generate a fallback placeholder if no src is provided
const fallbackSrc = '/images/blog/placeholder-hero.svg';
const imageSrc = src || (showFallback ? fallbackSrc : null);
---

{imageSrc ? (
  <img 
    src={imageSrc} 
    alt={alt}
    class={className}
    loading={loading}
    onerror={showFallback ? `this.src='${fallbackSrc}'` : "this.style.display='none'"}
  />
) : showFallback && (
  <div class={`bg-gray-200 flex items-center justify-center ${className}`}>
    <div class="text-center text-gray-500">
      <svg class="w-12 h-12 mx-auto mb-2" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd" />
      </svg>
      <p class="text-sm">{fallbackText}</p>
    </div>
  </div>
)}